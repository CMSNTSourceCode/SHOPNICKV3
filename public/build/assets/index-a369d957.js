import{r as B,c as M,o as re,a as _,b as g,d as p,w as c,e as m,f as x,g as a,h as n,t as o,F as $,i as C,j as v,k as ie,n as q,l as ce,A as ue}from"./chunk-6b34d741.js";import"./chunk-e47d8634.js";const de=["onSubmit"],pe={class:"grid grid-cols-1 md:grid-cols-4 gap-3"},_e={class:"form-label"},ge={class:"form-label"},ve={class:"form-label"},fe={class:"grid grid-cols-2 gap-3"},he={class:"btn btn-sm btn-primary w-full lg:mt-[32px]"},me=a("i",{class:"fas fa-search"},null,-1),be=a("i",{class:"fas fa-trash"},null,-1),ke={key:0},we={class:"border border-primary rounded-lg p-[1px] bg-white dark:bg-gray-800"},ye={class:"text-center text-lg font-bold bg-primary text-white",style:{"margin-top":"-6px"}},xe={class:"p-3"},$e={class:"grid grid-cols-2 mb-3 gap-3"},Ce=a("i",{class:"fa-solid fa-check-circle"},null,-1),Se=a("i",{class:"fa-solid fa-star"},null,-1),Ie=a("i",{class:"fa-solid fa-check-circle"},null,-1),Be={class:"text-center grid grid-cols-2 gap-3"},Pe={class:"col-span-2"},Te={class:"border border-red-500 rounded-lg p-1 font-bold dark:text-white"},Me={class:"text-green-600"},Le={key:0,class:"border border-red-500 rounded-lg p-1 font-bold dark:text-white mt-2"},Ue={class:"text-red-500"},Ne={key:0,style:{padding:"18px"}},Ve=["onClick"],je=a("i",{class:"fas fa-shopping-cart me-2"},null,-1),Ae={class:"text-center mt-3"},Oe={class:"list-none"},Ee={class:"inline-block"},Re=["onClick"],De={class:"inline-block"},Fe={__name:"Index",props:{groupId:{type:String,default:0}},setup(G){const U=G,b=B({price:"",search:"",display_by:""}),s=B({page:1,limit:16,total_rows:0,total_page:0,visible_pages:[]}),H=M(()=>{const{page:t,total_page:l,visible_pages:i}=s.value,f=5;let d=Math.max(t-Math.floor(f/2),1),h=Math.min(d+f-1,l);return h-d+1<f&&(d=Math.max(h-f+1,1)),Array.from({length:h-d+1},(j,S)=>d+S)}),z=t=>{s.value.page!==t&&(s.value.page=t,k())},X=()=>{s.value.page<=1||(s.value.page--,k())},J=()=>{s.value.page>=s.value.total_page||(s.value.page++,k())},W=M(()=>__defaultLang&&__defaultLang==="vn"?[{label:"Mặc định",value:""},{label:"Mới nhất",value:"created_at_desc"},{label:"Cũ nhất",value:"created_at_asc"},{label:"Giá thấp đến cao",value:"price_asc"},{label:"Giá cao đến thấp",value:"price_desc"}]:[{label:"Default",value:""},{label:"Newest",value:"created_at_desc"},{label:"Oldest",value:"created_at_asc"},{label:"Price low to high",value:"price_asc"},{label:"Price high to low",value:"price_desc"}]),Y=M(()=>__defaultLang&&__defaultLang==="vn"?[{label:"Tất cả",value:""},{label:"Dưới 100.000đ",value:"0-100000"},{label:"100.000đ - 200.000đ",value:"100000-200000"},{label:"200.000đ - 500.000đ",value:"200000-500000"},{label:"500.000đ - 1.000.000đ",value:"500000-1000000"},{label:"Trên 1.000.000đ",value:"1000000-0"}]:[{label:"All",value:""},{label:"Under $5",value:"0-5"},{label:"$5 - $10",value:"5-10"},{label:"$10 - $20",value:"10-20"},{label:"$20 - $50",value:"20-50"},{label:"Over $50",value:"50-0"}]),w=B(!1),I=B([]),k=async()=>{var t,l;w.value=!0;try{const{data:i}=await axios.get("/api/stores/accounts-v2",{params:{...b.value,group_id:U.groupId,...s.value}});y("page")!==null&&s.value.page!==parseInt(y("page"))&&V("product_id"),s.value.page!==1?le("page",s.value.page):V("page"),I.value=((t=i.data)==null?void 0:t.data)||[],s.value=((l=i.data)==null?void 0:l.meta)||[]}catch(i){Swal.fire("Oops...",$catchMessage(i),"error")}finally{const i=y("product_id");setTimeout(i?()=>{const f=document.getElementById("card_"+i);f&&f.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}:ae,500),setTimeout(()=>{w.value=!1},600)}},Z=()=>{s.value.page=1,k()},ee=()=>{b.value={price:"",search:""},s.value.page=1,k()},N=(t,l="VND",i=2)=>$formatCurrency(t,l,i),P=async t=>{if((await Swal.fire({icon:"question",title:$__t("Bạn chắc chứ?"),text:`${$__t("Bạn sẽ mua nick")} #${t.code} ${$__t("với giá")} ${t.price_str}?`,showCancelButton:!0,confirmButtonText:$__t("Đồng ý"),cancelButtonText:$__t("Hủy")})).isConfirmed!==!0)return;let i=1;if(t.is_bulk>1){const{value:d}=await Swal.fire({icon:"warning",input:"number",inputLabel:r("Số lượng tài khoản muốn mua"),inputPlaceholder:r("Nhập số lượng cần mua"),inputValidator:h=>{if(!h)return r("Vui lòng nhập số lượng tài khoản cần mua");if(parseInt(h)<1)return r("Số lượng tài khoản cần mua phải lớn hơn 0");if(parseInt(h)>t.is_bulk)return r("Số lượng tài khoản cần mua không được lớn hơn")+" "+t.is_bulk},inputAttributes:{min:1,max:t.is_bulk,step:1},inputValue:1,showCancelButton:!0,confirmButtonText:r("Đồng ý"),cancelButtonText:r("Hủy")});if(d===void 0)return;i=parseInt(d)}Swal.fire({icon:"info",title:$__t("Đang xử lý!"),html:$__t("Không được tắt trang này, vui lòng đợi trong giây lát!"),timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:()=>{Swal.showLoading()},willClose:()=>{}});try{const{data:d}=await axios.post("/api/stores/accounts-v2/"+t.code+"/buy",{is_bulk:t.is_bulk,quantity:i!==void 0?i:1,group_id:U.groupId});Swal.fire("Great!",d.message,"success").then(()=>{d.data.is_bulk?window.open("/account/orders/bulk-orders/"+d.data.code,"_self"):window.open("/account/orders/accounts-v2/"+d.data.code,"_self")})}catch(d){Swal.fire("Oops...",$catchMessage(d),"error")}},T=()=>{const t=[colorPrimary];return t[Math.floor(Math.random()*t.length)]},te=t=>typeof t=="string"||t instanceof String,ae=()=>{window.scrollTo({top:0,behavior:"smooth"})},le=(t,l)=>{if(parseInt(y(t))===parseInt(l))return;const i=new URL(window.location.href);i.searchParams.set(t,l),window.history.pushState({},"",i)},V=t=>{if(y(t)===null)return;const l=new URL(window.location.href);l.searchParams.delete(t),window.history.pushState({},"",l)},y=t=>new URL(window.location.href).searchParams.get(t);window.addEventListener("popstate",()=>{const t=y("page");t&&s.value.page!==parseInt(t)?(s.value.page=parseInt(t),k()):!t&&s.value.page!==1&&(s.value.page=1,k())});const r=t=>$__t(t);return re(()=>{const t=y("page");t&&(s.value.page=parseInt(t)),k()}),(t,l)=>{var K,Q;const i=_("a-select-option"),f=_("a-select"),d=_("a-input"),h=_("a-spin"),j=_("a-image"),S=_("a-tag"),A=_("a-button"),O=_("a-badge-ribbon"),E=_("a-col"),R=_("a-row"),ne=_("a-skeleton"),D=_("a-card"),oe=_("a-empty"),F=_("iconify-icon");return n(),g("section",null,[p(h,{spinning:w.value},{default:c(()=>[a("form",{class:"mb-5 mt-5",onSubmit:ie(Z,["prevent"])},[a("div",pe,[a("div",null,[a("label",_e,o(r("Chọn mức giá"))+": ",1),p(f,{value:b.value.price,"onUpdate:value":l[0]||(l[0]=e=>b.value.price=e),placeholder:r("Chọn mức giá"),style:{width:"100%"}},{default:c(()=>[(n(!0),g($,null,C(Y.value,e=>(n(),m(i,{key:e.value,value:e.value},{default:c(()=>[v(o(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),a("div",null,[a("label",ge,o(r("Sắp Xếp Theo:")),1),p(f,{value:b.value.display_by,"onUpdate:value":l[1]||(l[1]=e=>b.value.display_by=e),style:{width:"100%"}},{default:c(()=>[(n(!0),g($,null,C(W.value,e=>(n(),m(i,{key:e.value,value:e.value},{default:c(()=>[v(o(e.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),a("div",null,[a("label",ve,o(r("Tìm kiếm"))+": ",1),p(d,{value:b.value.search,"onUpdate:value":l[2]||(l[2]=e=>b.value.search=e),placeholder:r("Tìm kiếm mã sản phẩm, trang phục,..."),style:{width:"100%"}},null,8,["value","placeholder"])]),a("div",fe,[a("div",null,[a("button",he,[me,v(" "+o(r("Tìm kiếm")),1)])]),a("div",null,[a("button",{class:"btn btn-sm btn-danger w-full lg:mt-[32px]",type:"button",onClick:l[3]||(l[3]=e=>ee())},[be,v(" "+o(r("Đặt lại")),1)])])])])],40,de)]),_:1},8,["spinning"]),((K=I.value)==null?void 0:K.length)!==0&&!w.value?(n(),g("div",ke,[w.value?(n(),m(R,{key:1,gutter:18},{default:c(()=>[(n(),g($,null,C(16,e=>p(E,{xs:12,sm:8,lg:6,key:e},{default:c(()=>[p(D,{class:"mb-3 h-[303px]"},{default:c(()=>[p(ne,{active:""})]),_:1})]),_:2},1024)),64))]),_:1})):(n(),m(R,{key:0,gutter:18},{default:c(()=>[(n(!0),g($,null,C(I.value,e=>(n(),m(E,{xs:24,md:8,lg:6,key:e.id,class:"mb-2 mt-2 cursor-pointer"},{default:c(()=>[p(O,{color:"red",text:`-${e.discount}%`,class:q({hidden:e.discount<=0}),placement:"start"},{default:c(()=>[p(O,{color:"pink",text:`MS: ${e.code}`,placement:"end"},{default:c(()=>[a("div",we,[p(j,{src:e.image,alt:e.name,width:"100%",class:"rounded-t-lg sm:!h-[200px] lg:!h-[170px]"},null,8,["src","alt"]),a("div",ye,o(e.name),1),a("div",xe,[a("div",$e,[(n(!0),g($,null,C(e.highlights,(u,se)=>(n(),g("div",{key:se,class:"lg:col-span-1"},[te(u)?(n(),m(S,{key:0,color:T(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:c(()=>[Ce,v(" "+o(u),1)]),_:2},1032,["color"])):(u==null?void 0:u.name)!==void 0&&(u==null?void 0:u.value)!=="undefined"?(n(),m(S,{key:1,color:T(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:c(()=>[Se,v(" "+o(u.name)+": "+o(u.value),1)]),_:2},1032,["color"])):(u==null?void 0:u[0])!==void 0?(n(),m(S,{key:2,color:T(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:c(()=>[Ie,v(" "+o(u[0]),1)]),_:2},1032,["color"])):x("",!0)]))),128))]),a("div",Be,[a("div",Pe,[a("div",Te,[v(o(r("Còn lại"))+" ",1),a("span",Me,o(e.amount),1),v(" "+o(r("tài khoản")),1)]),e.is_bulk>1?(n(),g("div",Le,[v(o(r("Được mua"))+" ",1),a("span",Ue,o(e.is_bulk),1),v(" "+o(r("tài khoản / lần")),1)])):x("",!0)]),a("div",null,[e.discount!==0?(n(),m(A,{key:0,type:"dashed",onClick:u=>P(e),class:"dark:text-white mb-1"},{default:c(()=>[a("del",null,o(N(e.price)),1)]),_:2},1032,["onClick"])):x("",!0),p(A,{type:"dashed",danger:"",onClick:u=>P(e),block:""},{default:c(()=>[v(o(N(e.price-e.price*e.discount/100)),1)]),_:2},1032,["onClick"])]),a("div",null,[e.discount!==0?(n(),g("div",Ne)):x("",!0),a("button",{class:"btn btn-sm btn-primary w-full",onClick:u=>P(e)},[je,a("span",null,o(r("Mua Ngay")),1)],8,Ve)])])])])]),_:2},1032,["text"])]),_:2},1032,["text","class"])]),_:2},1024))),128))]),_:1}))])):x("",!0),((Q=I.value)==null?void 0:Q.length)===0&&!w.value?(n(),m(D,{key:1},{default:c(()=>[p(oe,{description:r("Không tìm thấy tài khoản nào trong nhóm này")},null,8,["description"])]),_:1})):x("",!0),a("div",Ae,[p(h,{spinning:w.value},{default:c(()=>[a("ul",Oe,[a("li",Ee,[a("a",{href:"javascript:void(0)",onClick:l[4]||(l[4]=e=>X()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px] pl-2"},[p(F,{icon:"material-symbols:arrow-back-ios-rounded"})])]),(n(!0),g($,null,C(H.value,e=>(n(),g("li",{key:e,class:"inline-block"},[a("a",{href:"javascript:void(0)",onClick:u=>z(e),class:q(["flex items-center justify-center w-6 h-6 bg-slate-100 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300",{"p-active":s.value.page===e}])},o(e!==-1?e:"..."),11,Re)]))),128)),a("li",De,[a("a",{href:"javascript:void(0)",onClick:l[5]||(l[5]=e=>J()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px]"},[p(F,{icon:"material-symbols:arrow-forward-ios-rounded"})])])])]),_:1},8,["spinning"])])])}}},L=ce({});L.use(ue);L.component("account-index",Fe);L.mount("#app");
