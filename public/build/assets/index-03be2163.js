import{r as T,c as N,o as he,a as c,b as _,d as a,w as o,e as $,f as fe,g as l,h as i,t as p,F as U,i as G,j as b,k as ge,n as Z,l as be,A as ke}from"./chunk-6b34d741.js";import"./chunk-e47d8634.js";const ye=["onSubmit"],xe={class:"grid grid-cols-1 md:grid-cols-4 gap-3"},we={class:"form-label"},Te={class:"form-label"},$e={class:"form-label"},Ce={class:"grid grid-cols-2 gap-3"},Me={class:"btn btn-sm btn-primary w-full lg:mt-[32px]"},Ue=l("i",{class:"fas fa-search"},null,-1),Ge=l("i",{class:"fas fa-trash"},null,-1),Se={style:{background:"transparent"},class:"border border-primary rounded-lg p-[1px]"},Be={class:"text-center"},Ke={class:"text-lg mt-[-6px] font-semibold bg-danger-500 text-white whitespace-normal"},Le={class:"p-3"},Oe=l("div",{class:"text-center mb-[5px]"},null,-1),Pe={class:"text-center space-y-3 lg:flex lg:justify-between lg:gap-3 lg:space-y-0"},Ie=["onClick"],Ne=l("i",{class:"fas fa-shopping-cart me-2 hidden lg:inline-block"},null,-1),je={class:""},Ve={class:"text-center mt-3"},He={class:"list-none"},De={class:"inline-block"},Fe=["onClick"],Ae={class:"inline-block"},Ee=l("hr",{class:"mb-3"},null,-1),Re={key:0},We=["innerHTML"],Ze={class:"space-y-3"},qe={key:0},ze={class:"text-danger-600"},Xe={key:1},Je={key:1},Qe={class:"space-y-3 mb-3"},Ye={key:0},ea={class:"text-danger-600"},aa={key:1},ta={__name:"Index",props:{groupId:{type:String,default:0}},setup(q){const z=q,x=T({price:"",search:"",display_by:""}),h=T({page:1,limit:24,total_rows:0,total_page:0,visible_pages:[]}),X=N(()=>{const{page:d,total_page:e,visible_pages:y}=h.value,f=5;let r=Math.max(d-Math.floor(f/2),1),C=Math.min(r+f-1,e);return C-r+1<f&&(r=Math.max(C-f+1,1)),Array.from({length:C-r+1},(V,O)=>r+O)}),J=d=>{h.value.page!==d&&(h.value.page=d,S())},Q=()=>{h.value.page<=1||(h.value.page--,S())},Y=()=>{h.value.page>=h.value.total_page||(h.value.page++,S())},ee=N(()=>__defaultLang&&__defaultLang==="vn"?[{label:"Mặc định",value:""},{label:"Mới nhất",value:"created_at_desc"},{label:"Cũ nhất",value:"created_at_asc"},{label:"Giá thấp đến cao",value:"price_asc"},{label:"Giá cao đến thấp",value:"price_desc"}]:[{label:"Default",value:""},{label:"Newest",value:"created_at_desc"},{label:"Oldest",value:"created_at_asc"},{label:"Price low to high",value:"price_asc"},{label:"Price high to low",value:"price_desc"}]),ae=N(()=>__defaultLang&&__defaultLang==="vn"?[{label:"Tất cả",value:""},{label:"Dưới 100.000đ",value:"0-100000"},{label:"100.000đ - 200.000đ",value:"100000-200000"},{label:"200.000đ - 500.000đ",value:"200000-500000"},{label:"500.000đ - 1.000.000đ",value:"500000-1000000"},{label:"Trên 1.000.000đ",value:"1000000-0"}]:[{label:"All",value:""},{label:"Under $5",value:"0-5"},{label:"$5 - $10",value:"5-10"},{label:"$10 - $20",value:"10-20"},{label:"$20 - $50",value:"20-50"},{label:"Over $50",value:"50-0"}]),w=T(!1),L=T([]);T([]);const S=async()=>{var d,e;w.value=!0;try{const{data:y}=await axios.get("/api/stores/items",{params:{...x.value,group_id:z.groupId,...h.value}});L.value=((d=y.data)==null?void 0:d.data)||[],h.value=((e=y.data)==null?void 0:e.meta)||[]}catch(y){Swal.fire("Oops...",$catchMessage(y),"error")}finally{w.value=!1,de()}},te=()=>{h.value.page=1,S()},le=()=>{x.value={price:"",search:""},h.value.page=1,S()},K=T(!1),v=T(null),s=T({Lien_He:"",Mat_Khau:"",Ten_Game:"",Tai_Khoan:"",user_note:"",isConfirm:!1,Dang_Nhap_Bang:null}),ne=async d=>{(v.value=d)&&(K.value=!0)},oe=()=>{K.value=!1},se=()=>{K.value=!1},ie=async(d,e)=>{if((d==null?void 0:d.code)===void 0)return;if(d.type==="addfriend"&&e.Ten_In_Game==="")return Swal.fire("Oops...",$__t("Vui lòng nhập tên tài khoản nhận"),"error");if(d.type==="user_pass"&&e.Tai_Khoan==="")return Swal.fire("Oops...",$__t("Vui lòng nhập tài khoản"),"error");if(d.type==="user_pass"&&e.Mat_Khau==="")return Swal.fire("Oops...",$__t("Vui lòng nhập mật khẩu"),"error");if((await Swal.fire({icon:"question",title:$__t("Bạn chắc chứ?"),text:`${$__t("Bạn sẽ mua vật phẩm")} #${d.code} ${$__t("với giá")} ${d.payment_str}?`,showCancelButton:!0,confirmButtonText:$__t("Đồng ý"),cancelButtonText:$__t("Hủy")})).isConfirmed===!0){Swal.fire({icon:"info",title:$__t("Đang xử lý!"),html:$__t("Không được tắt trang này, vui lòng đợi trong giây lát!"),timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:()=>{Swal.showLoading()},willClose:()=>{}});try{const{data:f}=await axios.post("/api/stores/items/"+d.code+"/buy",e);Swal.fire("Great!",f.message,"success").then(()=>{window.open("/account/orders/items/"+f.data.code,"_self")})}catch(f){Swal.fire("Oops...",$catchMessage(f),"error")}}},de=()=>{window.scrollTo({top:0,behavior:"smooth"})},n=d=>$__t(d),re=N(()=>window.loginWith);return he(()=>{S()}),(d,e)=>{var E,R,W;const y=c("a-select-option"),f=c("a-select"),r=c("a-input"),C=c("a-spin"),V=c("a-skeleton"),O=c("a-card"),B=c("a-col"),P=c("a-row"),ue=c("a-image"),ce=c("a-tooltip"),H=c("a-badge-ribbon"),pe=c("a-empty"),D=c("iconify-icon"),F=c("a-button"),ve=c("a-tag"),I=c("a-checkbox"),A=c("a-form"),_e=c("a-badge"),me=c("a-modal");return i(),_("section",null,[a(C,{spinning:w.value},{default:o(()=>[l("form",{class:"mb-5 mt-5",onSubmit:ge(te,["prevent"])},[l("div",xe,[l("div",null,[l("label",we,p(n("Chọn mức giá"))+": ",1),a(f,{value:x.value.price,"onUpdate:value":e[0]||(e[0]=t=>x.value.price=t),placeholder:n("Chọn mức giá"),style:{width:"100%"}},{default:o(()=>[(i(!0),_(U,null,G(ae.value,t=>(i(),$(y,{key:t.value,value:t.value},{default:o(()=>[b(p(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),l("div",null,[l("label",Te,p(n("Sắp Xếp Theo:")),1),a(f,{value:x.value.display_by,"onUpdate:value":e[1]||(e[1]=t=>x.value.display_by=t),style:{width:"100%"}},{default:o(()=>[(i(!0),_(U,null,G(ee.value,t=>(i(),$(y,{key:t.value,value:t.value},{default:o(()=>[b(p(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),l("div",null,[l("label",$e,p(n("Tìm kiếm"))+": ",1),a(r,{value:x.value.search,"onUpdate:value":e[2]||(e[2]=t=>x.value.search=t),placeholder:n("Tìm kiếm mã sản phẩm, trang phục,..."),style:{width:"100%"}},null,8,["value","placeholder"])]),l("div",Ce,[l("div",null,[l("button",Me,[Ue,b(" "+p(n("Tìm kiếm")),1)])]),l("div",null,[l("button",{class:"btn btn-sm btn-danger w-full lg:mt-[32px]",type:"button",onClick:e[3]||(e[3]=t=>le())},[Ge,b(" "+p(n("Đặt lại")),1)])])])])],40,ye)]),_:1},8,["spinning"]),w.value&&((E=L.value)==null?void 0:E.length)===0?(i(),$(P,{key:0,gutter:18},{default:o(()=>[(i(),_(U,null,G(4,t=>a(B,{xs:12,sm:8,lg:6,key:t},{default:o(()=>[a(O,{class:"mb-3"},{default:o(()=>[a(V,{active:""})]),_:1})]),_:2},1024)),64))]),_:1})):(i(),$(C,{key:1,spinning:w.value},{default:o(()=>[a(P,{gutter:18},{default:o(()=>[(i(!0),_(U,null,G(L.value,t=>(i(),$(B,{xs:12,md:6,lg:4,key:t.id,class:"mb-2 mt-2 cursor-pointer"},{default:o(()=>[a(H,{color:"red",text:`${t.discount}%`,class:Z({hidden:t.discount<=0}),placement:"start"},{default:o(()=>[a(H,{color:"pink",text:`MS: ${t.code}`,placement:"end"},{default:o(()=>[l("div",Se,[l("div",Be,[a(ue,{src:t.image,alt:"",style:{"max-width":"300px","max-height":"400px"},class:"rounded-t-lg"},null,8,["src"]),a(ce,{title:n("Đã bán")+" "+t.sold_count,placement:"bottom"},{default:o(()=>[l("h4",Ke,p(t.name),1)]),_:2},1032,["title"])]),l("div",Le,[Oe,l("div",Pe,[l("button",{class:"btn btn-sm btn-primary w-full",onClick:m=>ne(t)},[Ne,l("span",je,p(t.payment_str),1)],8,Ie)])])])]),_:2},1032,["text"])]),_:2},1032,["text","class"])]),_:2},1024))),128))]),_:1})]),_:1},8,["spinning"])),((R=L.value)==null?void 0:R.length)===0&&!w.value?(i(),$(O,{key:2},{default:o(()=>[a(pe,{description:n("Không tìm thấy vật phẩm nào trong nhóm này")},null,8,["description"])]),_:1})):fe("",!0),l("div",Ve,[a(C,{spinning:w.value},{default:o(()=>[l("ul",He,[l("li",De,[l("a",{href:"javascript:void(0)",onClick:e[4]||(e[4]=t=>Q()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px] pl-2"},[a(D,{icon:"material-symbols:arrow-back-ios-rounded"})])]),(i(!0),_(U,null,G(X.value,t=>(i(),_("li",{key:t,class:"inline-block"},[l("a",{href:"javascript:void(0)",onClick:m=>J(t),class:Z(["flex items-center justify-center w-6 h-6 bg-slate-100 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300",{"p-active":h.value.page===t}])},p(t!==-1?t:"..."),11,Fe)]))),128)),l("li",Ae,[l("a",{href:"javascript:void(0)",onClick:e[5]||(e[5]=t=>Y()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px]"},[a(D,{icon:"material-symbols:arrow-forward-ios-rounded"})])])])]),_:1},8,["spinning"])]),a(me,{open:K.value,"onUpdate:open":e[19]||(e[19]=t=>K.value=t),width:820,title:`${n("Mua Vật Phẩm")}: ${(W=v.value)==null?void 0:W.name}`,onOk:se},{footer:o(()=>{var t;return[a(F,{key:"back",onClick:oe},{default:o(()=>[b(p(n("Huỷ")),1)]),_:1}),a(F,{key:"submit",type:"primary",loading:w.value,disabled:((t=s.value)==null?void 0:t.isConfirm)!==!0,onClick:e[6]||(e[6]=m=>ie(v.value,s.value))},{default:o(()=>[b(p(n("Thanh Toán")),1)]),_:1},8,["loading","disabled"])]}),default:o(()=>{var t;return[Ee,((t=v.value)==null?void 0:t.type)==="addfriend"?(i(),_("div",Re,[a(P,{gutter:12,class:"space-y-3"},{default:o(()=>[a(B,{xs:24,md:12},{default:o(()=>{var m,u;return[l("div",{class:"mb-3",innerHTML:(m=v.value)==null?void 0:m.description},null,8,We),l("div",Ze,[(i(!0),_(U,null,G((u=v.value)==null?void 0:u.ingame_list,(k,M)=>(i(),$(ve,{key:M,color:"success",class:"copy cursor-pointer","data-clipboard-text":k},{default:o(()=>[b(p(k),1)]),_:2},1032,["data-clipboard-text"]))),128))])]}),_:1}),a(B,{xs:24,md:12},{default:o(()=>[a(A,{model:s.value,class:"space-y-3"},{default:o(()=>{var m,u,k,M;return[a(r,{value:(m=v.value)==null?void 0:m.name,"addon-after":n("Sản phẩm"),disabled:""},null,8,["value","addon-after"]),a(r,{value:(u=v.value)==null?void 0:u.payment_str,"addon-after":n("Giá gốc"),disabled:""},null,8,["value","addon-after"]),a(r,{value:(k=v.value)==null?void 0:k.discount,"addon-after":n("Giảm giá"),"addon-before":"%",disabled:""},null,8,["value","addon-after"]),((M=v.value)==null?void 0:M.type)=="addfriend"?(i(),_("div",qe,[a(r,{value:s.value.Tai_Khoan,"onUpdate:value":e[7]||(e[7]=g=>s.value.Tai_Khoan=g),placeholder:"admin#1234","addon-after":n("Tài khoản nhận"),autocomplete:"0"},null,8,["value","addon-after"]),a(I,{checked:s.value.isConfirm,"onUpdate:checked":e[8]||(e[8]=g=>s.value.isConfirm=g),class:"mt-2"},{default:o(()=>[b(p(n("Tôi đã kết bạn"))+" ",1),l("span",ze,p(n("TẤT CẢ")),1),b(" ingame ")]),_:1},8,["checked"])])):(i(),_("div",Xe,[a(I,{checked:s.value.isConfirm,"onUpdate:checked":e[9]||(e[9]=g=>s.value.isConfirm=g)},{default:o(()=>[b(p(n("Tôi cung cấp đúng tài khoản và mật khẩu")),1)]),_:1},8,["checked"])]))]}),_:1},8,["model"])]),_:1})]),_:1})])):(i(),_("div",Je,[a(P,{gutter:12},{default:o(()=>[a(B,{xs:24,md:12},{default:o(()=>{var m;return[l("div",Qe,[a(r,{value:s.value.Tai_Khoan,"onUpdate:value":e[10]||(e[10]=u=>s.value.Tai_Khoan=u),placeholder:n("Tài khoản"),"addon-after":n("Tài khoản"),autocomplete:"0"},null,8,["value","placeholder","addon-after"]),a(r,{value:s.value.Mat_Khau,"onUpdate:value":e[11]||(e[11]=u=>s.value.Mat_Khau=u),placeholder:n("Mật khẩu"),"addon-after":n("Mật khẩu"),type:"password",autocomplete:"0"},null,8,["value","placeholder","addon-after"]),a(r,{value:s.value.Ten_Game,"onUpdate:value":e[12]||(e[12]=u=>s.value.Ten_Game=u),placeholder:n("Tên Trong Game"),"addon-after":n("Tên Trong Game"),autocomplete:"0"},null,8,["value","placeholder","addon-after"]),a(r,{value:s.value.Lien_He,"onUpdate:value":e[13]||(e[13]=u=>s.value.Lien_He=u),placeholder:n("Liên hệ (Zalo, Facebook...)"),"addon-after":n("Liên hệ (Zalo, Facebook...)"),type:"text",autocomplete:"0"},null,8,["value","placeholder","addon-after"]),a(f,{value:s.value.Dang_Nhap_Bang,"onUpdate:value":e[14]||(e[14]=u=>s.value.Dang_Nhap_Bang=u),placeholder:"Chọn phương thức đăng nhập có sẵn",options:re.value,style:{width:"100%"}},null,8,["value","options"])]),l("div",null,[(i(!0),_(U,null,G((m=v.value)==null?void 0:m.highlights,(u,k)=>(i(),$(_e,{key:k,color:"red",text:u},null,8,["text"]))),128))])]}),_:1}),a(B,{xs:24,md:12},{default:o(()=>[a(A,{class:"space-y-3"},{default:o(()=>{var m,u,k,M;return[a(r,{value:(m=v.value)==null?void 0:m.name,"addon-after":n("Sản phẩm"),disabled:""},null,8,["value","addon-after"]),a(r,{value:(u=v.value)==null?void 0:u.payment_str,"addon-after":n("Giá gốc"),disabled:""},null,8,["value","addon-after"]),a(r,{value:(k=v.value)==null?void 0:k.discount,"addon-after":n("Giảm giá"),"addon-before":"%",disabled:""},null,8,["value","addon-after"]),a(r,{value:s.value.user_note,"onUpdate:value":e[15]||(e[15]=g=>s.value.user_note=g),placeholder:n("Ghi chú cho admin"),"addon-after":n("Ghi chú cho admin")},null,8,["value","placeholder","addon-after"]),((M=v.value)==null?void 0:M.type)=="addfriend"?(i(),_("div",Ye,[a(r,{value:s.value.Ten_In_Game,"onUpdate:value":e[16]||(e[16]=g=>s.value.Ten_In_Game=g),placeholder:"admin#1234","addon-after":n("Tài khoản nhận")},null,8,["value","addon-after"]),a(I,{checked:s.value.isConfirm,"onUpdate:checked":e[17]||(e[17]=g=>s.value.isConfirm=g),class:"mt-2"},{default:o(()=>[b(p(n("Tôi đã kết bạn"))+" ",1),l("span",ea,p(n("TẤT CẢ")),1),b(" ingame ")]),_:1},8,["checked"])])):(i(),_("div",aa,[a(I,{checked:s.value.isConfirm,"onUpdate:checked":e[18]||(e[18]=g=>s.value.isConfirm=g)},{default:o(()=>[b(p(n("Tôi cung cấp đúng tài khoản và mật khẩu")),1)]),_:1},8,["checked"])]))]}),_:1})]),_:1})]),_:1})]))]}),_:1},8,["open","title"])])}}},j=be({});j.use(ke);j.component("item-index",ta);j.mount("#app");
