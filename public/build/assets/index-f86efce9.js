import{r as I,c as T,o as ce,a as u,b as v,d as i,w as s,g as a,e as g,f as V,h as r,t as d,F as k,i as $,j as h,k as ie,n as B,l as ue,A as de}from"./chunk-6b34d741.js";import"./chunk-e47d8634.js";const pe=["onSubmit"],_e={class:"grid grid-cols-1 md:grid-cols-4 gap-3"},ve={class:"form-label"},ge={class:"form-label"},fe={class:"form-label"},me={class:"grid grid-cols-2 gap-3"},he={class:"btn btn-sm btn-primary w-full lg:mt-[32px]"},be=a("i",{class:"fas fa-search"},null,-1),we=a("i",{class:"fas fa-trash"},null,-1),ye={class:"p-3"},xe={class:"grid grid-cols-2 mb-3 gap-3"},ke=a("i",{class:"fa-solid fa-check-circle"},null,-1),$e=a("i",{class:"fa-solid fa-star"},null,-1),Ce=a("i",{class:"fa-solid fa-check-circle"},null,-1),Ie={class:"text-center grid grid-cols-2 gap-3"},Se=a("i",{class:"fas fa-credit-card me-2"},null,-1),Pe=["onClick"],Te=a("i",{class:"fas fa-shopping-cart me-2"},null,-1),Be={class:"text-center mt-3"},Me={class:"list-none"},Ue={class:"inline-block"},Le=a("i",{class:"fas fa-arrow-left"},null,-1),Ee=[Le],je=["onClick"],Ne={class:"inline-block"},Ae=a("i",{class:"fas fa-arrow-right"},null,-1),Fe=[Ae],Oe={__name:"Index",props:{groupId:{type:String,default:0}},setup(D){const G=D,f=I({price:"",search:"",display_by:""}),n=I({page:1,limit:16,total_rows:0,total_page:0,visible_pages:[]}),K=T(()=>{const{page:e,total_page:l,visible_pages:o}=n.value,_=5;let w=Math.max(e-Math.floor(_/2),1),x=Math.min(w+_-1,l);return x-w+1<_&&(w=Math.max(x-_+1,1)),Array.from({length:x-w+1},(E,C)=>w+C)}),Q=e=>{n.value.page!==e&&(n.value.page=e,m())},q=()=>{n.value.page<=1||(n.value.page--,m())},z=()=>{n.value.page>=n.value.total_page||(n.value.page++,m())},H=T(()=>__defaultLang&&__defaultLang==="vn"?[{label:"Mặc định",value:""},{label:"Mới nhất",value:"created_at_desc"},{label:"Cũ nhất",value:"created_at_asc"},{label:"Giá thấp đến cao",value:"price_asc"},{label:"Giá cao đến thấp",value:"price_desc"}]:[{label:"Default",value:""},{label:"Newest",value:"created_at_desc"},{label:"Oldest",value:"created_at_asc"},{label:"Price low to high",value:"price_asc"},{label:"Price high to low",value:"price_desc"}]),X=T(()=>__defaultLang&&__defaultLang==="vn"?[{label:"Tất cả",value:""},{label:"Dưới 100.000đ",value:"0-100000"},{label:"100.000đ - 200.000đ",value:"100000-200000"},{label:"200.000đ - 500.000đ",value:"200000-500000"},{label:"500.000đ - 1.000.000đ",value:"500000-1000000"},{label:"Trên 1.000.000đ",value:"1000000-0"}]:[{label:"All",value:""},{label:"Under $5",value:"0-5"},{label:"$5 - $10",value:"5-10"},{label:"$10 - $20",value:"10-20"},{label:"$20 - $50",value:"20-50"},{label:"Over $50",value:"50-0"}]),y=I(!1),S=I([]),m=async()=>{var e,l;y.value=!0;try{const{data:o}=await axios.get("/api/stores/accounts",{params:{...f.value,group_id:G.groupId,...n.value}});b("page")!==null&&n.value.page!==parseInt(b("page"))&&L("product_id"),n.value.page!==1?U("page",n.value.page):L("page"),S.value=((e=o.data)==null?void 0:e.data)||[],n.value=((l=o.data)==null?void 0:l.meta)||[]}catch(o){Swal.fire("Oops...",$catchMessage(o),"error")}finally{const o=b("product_id");setTimeout(o?()=>{const _=document.getElementById("card_"+o);_&&_.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}:ae,500),setTimeout(()=>{y.value=!1},600)}},J=()=>{n.value.page=1,m()},W=()=>{f.value={price:"",search:""},n.value.page=1,m()},Y=(e,l="VND",o=2)=>$formatCurrency(e,l,o),Z=async e=>{if((await Swal.fire({icon:"question",title:$__t("Bạn chắc chứ?"),text:`${$__t("Bạn sẽ mua nick")} #${e.code} ${$__t("với giá")} ${e.price_str}?`,showCancelButton:!0,confirmButtonText:$__t("Đồng ý"),cancelButtonText:$__t("Hủy")})).isConfirmed===!0){Swal.fire({icon:"info",title:$__t("Đang xử lý!"),html:$__t("Không được tắt trang này, vui lòng đợi trong giây lát!"),timerProgressBar:!0,allowOutsideClick:!1,allowEscapeKey:!1,allowEnterKey:!1,didOpen:()=>{Swal.showLoading()},willClose:()=>{}});try{const{data:o}=await axios.post("/api/stores/accounts/"+e.code+"/buy");Swal.fire("Great!",o.message,"success").then(()=>{window.open("/account/orders/accounts/"+e.code,"_self")})}catch(o){Swal.fire("Oops...",$catchMessage(o),"error")}}},ee=e=>{U("product_id",e.code),window.open("/tai-khoan/thong-tin/"+e.code,"_self")},P=()=>{const e=["#C70039","#2E4374","#219C90","#EE9322","#5B0888","#004225","#9400FF"];return e[Math.floor(Math.random()*e.length)]},te=e=>typeof e=="string"||e instanceof String,ae=()=>{window.scrollTo({top:0,behavior:"smooth"})},U=(e,l)=>{if(parseInt(b(e))===parseInt(l))return;const o=new URL(window.location.href);o.searchParams.set(e,l),window.history.pushState({},"",o)},L=e=>{if(b(e)===null)return;const l=new URL(window.location.href);l.searchParams.delete(e),window.history.pushState({},"",l)},b=e=>new URL(window.location.href).searchParams.get(e),le=e=>new URL(window.location.href).searchParams.get("product_id")===e;window.addEventListener("popstate",()=>{const e=b("page");e&&n.value.page!==parseInt(e)?(n.value.page=parseInt(e),m()):!e&&n.value.page!==1&&(n.value.page=1,m())});const p=e=>$__t(e);return ce(()=>{const e=b("page");e&&(n.value.page=parseInt(e)),m()}),(e,l)=>{var R;const o=u("a-select-option"),_=u("a-select"),w=u("a-input"),x=u("a-spin"),E=u("a-image"),C=u("a-tag"),ne=u("a-button"),j=u("a-tooltip"),N=u("a-badge-ribbon"),A=u("a-col"),F=u("a-row"),oe=u("a-skeleton"),O=u("a-card"),se=u("a-empty");return r(),v("section",null,[i(x,{spinning:y.value},{default:s(()=>[a("form",{class:"mb-5 mt-5",onSubmit:ie(J,["prevent"])},[a("div",_e,[a("div",null,[a("label",ve,d(p("Chọn mức giá"))+": ",1),i(_,{value:f.value.price,"onUpdate:value":l[0]||(l[0]=t=>f.value.price=t),placeholder:p("Chọn mức giá"),style:{width:"100%"}},{default:s(()=>[(r(!0),v(k,null,$(X.value,t=>(r(),g(o,{key:t.value,value:t.value},{default:s(()=>[h(d(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value","placeholder"])]),a("div",null,[a("label",ge,d(p("Sắp Xếp Theo:")),1),i(_,{value:f.value.display_by,"onUpdate:value":l[1]||(l[1]=t=>f.value.display_by=t),style:{width:"100%"}},{default:s(()=>[(r(!0),v(k,null,$(H.value,t=>(r(),g(o,{key:t.value,value:t.value},{default:s(()=>[h(d(t.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),a("div",null,[a("label",fe,d(p("Tìm kiếm"))+": ",1),i(w,{value:f.value.search,"onUpdate:value":l[2]||(l[2]=t=>f.value.search=t),placeholder:p("Tìm kiếm mã sản phẩm, trang phục,..."),style:{width:"100%"}},null,8,["value","placeholder"])]),a("div",me,[a("div",null,[a("button",he,[be,h(" "+d(p("Tìm kiếm")),1)])]),a("div",null,[a("button",{class:"btn btn-sm btn-danger w-full lg:mt-[32px]",type:"button",onClick:l[3]||(l[3]=t=>W())},[we,h(" "+d(p("Đặt lại")),1)])])])])],40,pe)]),_:1},8,["spinning"]),a("div",null,[y.value?(r(),g(F,{key:1,gutter:18},{default:s(()=>[(r(),v(k,null,$(16,t=>i(A,{xs:12,sm:8,lg:6,key:t},{default:s(()=>[i(O,{class:"mb-3 h-[303px]"},{default:s(()=>[i(oe,{active:""})]),_:1})]),_:2},1024)),64))]),_:1})):(r(),g(F,{key:0,gutter:18},{default:s(()=>[(r(!0),v(k,null,$(S.value,t=>(r(),g(A,{xs:24,md:8,lg:6,key:t.id,class:"mb-2 mt-2 cursor-pointer",id:`card_${t.code}`},{default:s(()=>[i(N,{color:"red",text:`-${t.discount}%`,class:B({hidden:t.discount<=0}),placement:"start"},{default:s(()=>[i(N,{color:"pink",text:`MS: ${t.code}`,placement:"end"},{default:s(()=>[a("div",{class:B(["border border-primary rounded-lg p-[1px] bg-white dark:bg-gray-800",{"card-active":le(t.code)}])},[i(E,{src:t.image,alt:t.name,width:"100%",class:"rounded-t-lg sm:!h-[200px] lg:!h-[170px]"},null,8,["src","alt"]),a("div",ye,[a("div",xe,[(r(!0),v(k,null,$(t.highlights,(c,re)=>(r(),v("div",{key:re,class:"lg:col-span-1"},[te(c)?(r(),g(C,{key:0,color:P(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:s(()=>[ke,h(" "+d(c),1)]),_:2},1032,["color"])):(c==null?void 0:c.name)!==void 0&&(c==null?void 0:c.value)!=="undefined"?(r(),g(C,{key:1,color:P(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:s(()=>[$e,h(" "+d(c.name)+": "+d(c.value),1)]),_:2},1032,["color"])):(c==null?void 0:c[0])!==void 0?(r(),g(C,{key:2,color:P(),class:"w-full font-bold",style:{"white-space":"normal"}},{default:s(()=>[Ce,h(" "+d(c[0]),1)]),_:2},1032,["color"])):V("",!0)]))),128))]),a("div",Ie,[i(j,{title:t.discount!==0?`${p("Giá gốc")} ${Y(t.price)}`:""},{default:s(()=>[i(ne,{type:"dashed",block:"",onClick:c=>Z(t),class:"dark:text-white"},{default:s(()=>[Se,h(" "+d(t.price_str),1)]),_:2},1032,["onClick"])]),_:2},1032,["title"]),i(j,{title:t.name},{default:s(()=>[a("button",{class:"btn btn-sm btn-primary w-full",onClick:c=>ee(t)},[Te,a("span",null,d(p("Chi tiết")),1)],8,Pe)]),_:2},1032,["title"])])])],2)]),_:2},1032,["text"])]),_:2},1032,["text","class"])]),_:2},1032,["id"]))),128))]),_:1}))]),((R=S.value)==null?void 0:R.length)===0&&!y.value?(r(),g(O,{key:0},{default:s(()=>[i(se,{description:p("Không tìm thấy tài khoản nào trong nhóm này")},null,8,["description"])]),_:1})):V("",!0),a("div",Be,[i(x,{spinning:y.value},{default:s(()=>[a("ul",Me,[a("li",Ue,[a("a",{href:"javascript:void(0)",onClick:l[4]||(l[4]=t=>q()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px] pl-2"},Ee)]),(r(!0),v(k,null,$(K.value,t=>(r(),v("li",{key:t,class:"inline-block"},[a("a",{href:"javascript:void(0)",onClick:c=>Q(t),class:B(["flex items-center justify-center w-6 h-6 bg-slate-100 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300",{"p-active":n.value.page===t}])},d(t!==-1?t:"..."),11,je)]))),128)),a("li",Ne,[a("a",{href:"javascript:void(0)",onClick:l[5]||(l[5]=t=>z()),class:"flex items-center justify-center w-6 h-6 bg-slate-100 dark:bg-slate-700 dark:hover:bg-black-500 text-slate-800 dark:text-white rounded mx-[3px] sm:mx-1 hover:bg-black-500 hover:text-white text-sm font-Inter font-medium transition-all duration-300 relative top-[2px]"},Fe)])])]),_:1},8,["spinning"])])])}}},M=ue({});M.use(de);M.component("account-index",Oe);M.mount("#app");
